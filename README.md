# Eagle

> The Eagle of Zeus (Ancient Greek: ἀετός Διός, romanized: aetos Dios) was one of the chief attributes and personifications of Zeus, the head of the Olympian pantheon.


## Dependencies

### Using opam

Dependencies are installed using [opam](https://opam.ocaml.org/) *(opam is a source-based package manager for OCaml)*. We generate the opam config with [dune](https://github.com/ocaml/dune) *(A composable build system for OCaml)* which is configured using the `dune-project` file.

You can install dependencies listed in the `Eagle.opam` file using the command

        opam install ./ --deps-only

When adding a new dependency in `dune-project` you will have to install it the first time by hand using

        opam install <dependency>

After building the app with `dune build`, it will update the `Eagle.opam` file with the new dependency.

### Using nix

For the nix lovers there is also a `nix` flow.

The Makefile is available to easily drop into a nix-shell or to remember other commands.

Nix picks up packages from the [Eagle.opam](Eagle.opam) config. This file is generated by dune when you run the `dune build` command. 

This creates a small issue when adding a dependency to the `dune-project` file. I still need to figure out a better flow but at the moment you need to run `dune build` to update the `Eagle.opam`. Afterwards the nix config will pick this up.
You can also edit the [Eagle.opam](Eagle.opam) file by hand but be aware that dune will overwrite these changes.

The `opam2nix` tool is used to get a nix build that has every package explicitly layed out in a `.nix` file. This is very CPU consuming to build, so if that's a concern just use `opam` directly.

You can get started in nix by running

        make shell

## Building / Running

- Running
        
        dune exec eagle
- Building
        
        dune build